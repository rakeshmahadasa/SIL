g:
PUSH BP
MOV BP, SP
MOV R1, BP 
MOV R2, -3
ADD R1, R2
MOV R1, [R1]
MOV R2, 1 
EQ R1, R2 
JZ R1, L1 
MOV R1, 1 
MOV [0], R1
JMP L2 
L1: 
MOV R1, BP 
MOV R2, -3
ADD R1, R2
MOV R1, [R1]
MOV R2, 1 
SUB R1, R2 
MOV [0], R1
L2: 
MOV R1, BP
MOV R2, 2 
SUB R1, R2
MOV R2, [0] 
MOV [R1], R2 
POP BP
RET
f:
PUSH BP
MOV BP, SP
MOV R1, BP 
MOV R2, -3
ADD R1, R2
MOV R1, [R1]
MOV R2, 50 
EQ R1, R2 
JZ R1, L3 
MOV R1, 50 
MOV [0], R1
JMP L4 
L3: 
MOV R1, BP 
MOV R2, -3
ADD R1, R2
MOV R1, [R1]
MOV R2, 1 
ADD R1, R2 
MOV [0], R1
L4: 
MOV R1, BP
MOV R2, 2 
SUB R1, R2
MOV R2, [0] 
MOV [R1], R2 
POP BP
RET
START
MOV BP, 2
MOV SP, 2
PUSH R0
MOV R2, 50 
MOV R1, R2 
PUSH R1
PUSH R0 
CALL g
POP R1
POP R4
POP R0
MOV R0, R1
L6: 
PUSH R0
PUSH R1
PUSH R0
PUSH R0 
CALL f
POP R2
POP R5
POP R1
POP R0
NE R0,R2
JZ R0, L7 
MOV R0, R2
JMP L6 
L7: 
MOV [1], R1
MOV R1, [1] 
OUT R1 
PUSH R0
MOV R2, 50 
MOV R1, R2 
PUSH R1
PUSH R0 
CALL f
POP R1
POP R4
POP R0
MOV R0, R1
L9: 
PUSH R0
PUSH R1
PUSH R0
PUSH R0 
CALL g
POP R2
POP R5
POP R1
POP R0
NE R0,R2
JZ R0, L10 
MOV R0, R2
JMP L9 
L10: 
MOV [1], R1
MOV R1, [1] 
OUT R1 
HALT
